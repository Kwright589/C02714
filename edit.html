<!DOCTYPE html>
<html>
<head>
<title>Edit</title>
</head>
<body>
<?php include 'nav.php'?>
      <div class="container"> 

include 'connect.php';

if (isset( $_POST['submit'] //this implies you called your submit button "submit"
{
	include 'connect.php';

$ID = $_GET['ID']
$fn = $_POST['firstname'];
$sn = $_POST['surname'];
$em = $_POST['email'];

$updatequery ="UPDATE users SET firstname=?, surname=?, email=?, password=?, WHERE ID=?";
$stmt = $mysqli->prepare($updatequery);
$stmt->bind_param('sssss', $fn, $sn, $em, $ID );

if (!stmt->execute()) {
	echo "<p>Record updated succesfully</p>";
	echo "<a href=\"display.php\">display</a>";
}
$mysqli->close();
}
	
}
else
{
	include 'connect.php';
	
	$populatequery = "SELECT * from users WHERE ID=?";
	$stmt = $mysqli->prepare($populatequery);
	$stmt->execute();
	$result = $stmt ->get_result();
	
	    $user = $result->fetch_assoc();
	$fn = $user['firstname']
	$sn = $user['surname']
	$em = $user['email'];
}

$updatequery = "UPDATE users SET 
         firstname =?,
         surname = ?,
         email = ?,
         passsword = ?,
         Where ID = ?,"
         
$stmt = $mysqli->prepare($updatequery);

$stmt->bind_param('sssss', $_POST['fname'], $_POST['sname'],
$_POST['email'], $hashedpassword= password_hash($_POST['password'], PASSWORD_DEFAULT), $_GET['id']);
         
      if (!$stmt->execute()){
          echo "Error: ".$mysqli->error;
       }
       else {
            echo "<p>Record updated succesfully</p>";
            echo "<a href=\"users.php\".Back</a>";
       }
       $mysqli->close();
}
else
{
	include 'connect.php';
       
       $populatequery = "SELECT	 * from users WHERE ID=?;
       $stmt = $mysqli->preapre ($populatequery);
       $stmt->bind_param('s', $_GET['id]);
       $stmt->execute();
       $result = $stmt-.get_result();
       
       $user = $result->fetch_assoc();
       $fn = $user['firstname'];
       $sn = $user['surname'];
       $em = $user['email'];     
?>
<?php
]
?>
<h1> Edit record:</h1>
<form action="edit.php?id=<?php echo $_GET['id']; ?>" method="post" >

<label for="fname"> Firstname</label>
<input type="text" id="fname" name="fname" value="<?php echo "$fn";
?>"/><br>

<label for="sname"> Surname</label>
<input type="text" id="sname" name="sname" value="<?php echo "$sn";
?>"/><br>

<label for="email"> Email</label>
<input type="text" id="email" name="email" value="<?php echo "$em";
?>"/><br>

<label for="password"> Password</label>
<input type="text" id="pass" name="pass" value="<?php echo "$pw";
?>"/><br>

<input type="submit" id="submit" name="submit" value="submit"/>
</form>
</div>
</body>
</html>
<?php
} //this bracket closes the one that opened at if ($result)
?>



